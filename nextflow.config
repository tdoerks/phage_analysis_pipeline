// Nextflow configuration for K-State Beocat HPC
params {
    assemblies = "path/to/your/assemblies/*.fasta"
    outdir = "results"
    max_memory = '100.GB'
    max_cpus = 16
    max_time = '24.h'
}

// Apptainer configuration
apptainer {
    enabled = true
    autoMounts = true
    cacheDir = "$HOME/.apptainer/cache"
}

// Use local executor
executor {
    name = 'local'
    cpus = 16
    memory = '100.GB'
}

// Process-specific configurations
process {
    executor = 'local'
    
    withName: 'VIBRANT' {
        container = 'docker://staphb/vibrant'
        memory = '32.GB'
        cpus = 8
    }
    withName: 'DIAMOND_PROPHAGE' {
        container = 'docker://staphb/diamond'
        memory = '16.GB'
        cpus = 4
    }
    withName: 'CHECKV' {
        container = 'docker://quay.io/biocontainers/checkv:1.0.2--pyhdfd78af_0'
        memory = '8.GB'
        cpus = 2
    }
    withName: 'PHANOTATE' {
        container = 'docker://quay.io/biocontainers/phanotate:1.6.7--py311he264feb_0'
        memory = '4.GB'
        cpus = 2
    }
    withName: 'COMBINE_RESULTS' {
        memory = '4.GB'
        cpus = 1
    }
    withName: 'DOWNLOAD_PROPHAGE_DB' {
        container = 'docker://staphb/diamond'
        memory = '8.GB'
        cpus = 2
    }
}

process.shell = ['/bin/bash', '-euo', 'pipefail']
